<html lang="en" layout:decorate="~{/common/layout.html}">
<head>
    <title>setting</title>
</head>

<main layout:fragment="main">
    <div class="mx-auto flex flex-col">

        <form th:action="@{/account/settings}" method="post" enctype="multipart/form-data" th:object="${account}">
            <label for="profileImg" class="block mb-2 text-sm font-medium text-gray-900">프로필 이미지</label>
            <img id="profile-img-preview" th:src="${account.profile.profileImgUrl}" src="#" alt="" class="w-1/3">
            <input type="file" name="profileImg" id="profileImg" onchange="previewImage();">
            <div class="mb-6">
                <label for="nickname" class="block mb-2 text-sm font-medium text-gray-900">닉네임</label>
                <input type="text" th:field="*{profile.nickname}" id="nickname" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 w-1/3 focus:border-blue-500 block p-2.5" placeholder="nickname" required>
            </div>
            <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center">저장</button>
        </form>

    </div>

    <script type="text/javascript">
        function previewImage() {
             var file = $("#profileImg").prop('files')[0];
             var preview = $("#profile-img-preview");
             var reader = new FileReader();

             reader.onloadend = function () {
                 preview.attr("src", reader.result);
             }

             if (file) {
                 reader.readAsDataURL(file);
             } else {
                 preview.hide();
             }
         }
    </script>
</main>
</html>